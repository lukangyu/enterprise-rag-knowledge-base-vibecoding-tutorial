# 企业级GraphRAG知识库系统 - 开发计划文档

> 文档版本: v1.0  
> 创建日期: 2026-02-17  
> 文档状态: 正式版  
> 依据文档: 系统架构设计文档v2.0、技术选型文档v2.2、API接口设计文档v1.0  
> 开发模式: 敏捷迭代 + 模块化开发

---

## 目录

- [1. 项目概况](#1-项目概况)
- [2. 开发原则与策略](#2-开发原则与策略)
- [3. 模块依赖关系](#3-模块依赖关系)
- [4. 分阶段开发计划](#4-分阶段开发计划)
- [5. 详细开发任务](#5-详细开发任务)
- [6. 开发时间线](#6-开发时间线)
- [7. 风险评估与应对](#7-风险评估与应对)
- [8. MVP精简方案](#8-mvp精简方案)
- [9. 资源需求](#9-资源需求)
- [10. 验收标准](#10-验收标准)

---

## 1. 项目概况

### 1.1 项目基本信息

| 项目属性 | 详情 |
|---------|------|
| **项目名称** | 企业级GraphRAG知识库系统 |
| **项目类型** | AI原生应用 / 知识管理系统 |
| **架构模式** | GraphRAG（知识图谱+向量检索融合） |
| **开发周期** | 10周（MVP 4-6周） |
| **团队规模** | 5-8人 |

### 1.2 技术栈概览

| 层级 | 技术选型 | 版本 |
|------|---------|------|
| **前端** | React + Ant Design Pro + TypeScript | 18.x / 6.x / 5.x |
| **后端-业务** | Spring Boot + Spring Security + MyBatis Plus | 3.2.x / 6.x / 3.5.x |
| **后端-AI** | FastAPI + LlamaIndex + LangChain | 0.110+ / 0.10+ / 0.1+ |
| **数据库** | PostgreSQL + Milvus + Neo4j + Redis | 15+ / 2.3+ / 5.x / 7.x |
| **中间件** | Kafka + APISIX + XXL-Job | 3.6+ / 3.x / 2.4+ |
| **AI服务** | Qwen-Embedding + Qwen-Reranker + Qwen2.5-Max | latest |
| **运维** | Kubernetes + Docker + Prometheus + Grafana | 1.28+ / 24+ / 2.x / 10.x |

### 1.3 核心功能模块

```
┌─────────────────────────────────────────────────────────────────────┐
│                        GraphRAG核心功能模块                          │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│   ┌─────────────────────────────────────────────────────────────┐  │
│   │                      文档处理Pipeline                         │  │
│   │  文档上传 → 格式解析 → 文本分块 → 向量化 → 图谱构建            │  │
│   └─────────────────────────────────────────────────────────────┘  │
│                                                                     │
│   ┌─────────────────────────────────────────────────────────────┐  │
│   │                      知识图谱模块                             │  │
│   │  实体抽取 → 关系抽取 → 图谱存储 → 图遍历 → 证据链构建          │  │
│   └─────────────────────────────────────────────────────────────┘  │
│                                                                     │
│   ┌─────────────────────────────────────────────────────────────┐  │
│   │                      检索问答模块                             │  │
│   │  向量检索 → 图遍历检索 → 融合重排 → LLM生成 → 流式输出         │  │
│   └─────────────────────────────────────────────────────────────┘  │
│                                                                     │
│   ┌─────────────────────────────────────────────────────────────┐  │
│   │                      系统管理模块                             │  │
│   │  用户管理 → 权限控制 → 系统配置 → 审计日志 → 统计分析          │  │
│   └─────────────────────────────────────────────────────────────┘  │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 2. 开发原则与策略

### 2.1 开发原则

| 原则 | 说明 | 实践方式 |
|------|------|---------|
| **依赖优先** | 先开发被依赖的模块 | 基础设施 → 认证授权 → 业务模块 |
| **核心优先** | 优先实现核心业务价值 | 文档处理 → 检索问答 → 辅助功能 |
| **风险前置** | 高风险模块提前开发 | LLM集成、图谱构建优先验证 |
| **增量交付** | 每个阶段都有可交付成果 | 每周演示、持续集成 |
| **质量保证** | 测试驱动开发 | 单元测试 + 集成测试 + E2E测试 |

### 2.2 开发策略

```
开发策略：
├── 架构分层开发
│   ├── 基础设施层（第1-2周）
│   ├── 认证授权层（第2-3周）
│   ├── 业务服务层（第3-7周）
│   └── 系统管理层（第9-10周）
│
├── 双语言协作
│   ├── Spring Boot：业务逻辑、权限控制、系统管理
│   └── FastAPI：AI服务、图谱处理、LLM调用
│
├── 前后端分离
│   ├── 前端：React SPA，独立开发部署
│   └── 后端：RESTful API，OpenAPI文档
│
└── 敏捷迭代
    ├── 2周一个迭代周期
    ├── 每日站会同步进度
    └── 迭代结束演示验收
```

### 2.3 分支管理策略

```
Git分支策略：
├── main          # 主分支，生产环境代码
├── develop       # 开发分支，集成测试
├── feature/*     # 功能分支，新功能开发
├── bugfix/*      # 修复分支，问题修复
├── release/*     # 发布分支，版本发布
└── hotfix/*      # 热修复分支，紧急修复

分支命名规范：
├── feature/user-authentication
├── feature/document-upload
├── bugfix/login-redirect
└── release/v1.0.0
```

---

## 3. 模块依赖关系

### 3.1 模块依赖图

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                           模块依赖关系图                                          │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│   ┌─────────────────────────────────────────────────────────────────────────┐  │
│   │                          展现层 (Presentation)                           │  │
│   │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐    │  │
│   │  │  登录页面   │  │  问答界面   │  │  管理后台   │  │  图谱可视化 │    │  │
│   │  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘    │  │
│   └─────────┼────────────────┼────────────────┼────────────────┼───────────┘  │
│             │                │                │                │              │
│             ▼                ▼                ▼                ▼              │
│   ┌─────────────────────────────────────────────────────────────────────────┐  │
│   │                          网关层 (Gateway)                               │  │
│   │  ┌─────────────────────────────────────────────────────────────────┐   │  │
│   │  │                        APISIX API网关                            │   │  │
│   │  │  路由转发 │ 认证鉴权 │ 限流熔断 │ 日志追踪 │ 负载均衡            │   │  │
│   │  └─────────────────────────────────────────────────────────────────┘   │  │
│   └─────────────────────────────────────────────────────────────────────────┘  │
│             │                │                │                │              │
│             ▼                ▼                ▼                ▼              │
│   ┌─────────────────────────────────────────────────────────────────────────┐  │
│   │                        业务服务层 (Spring Boot)                         │  │
│   │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐    │  │
│   │  │  用户服务   │  │  文档服务   │  │  权限服务   │  │  系统服务   │    │  │
│   │  │  user-svc   │  │  doc-svc    │  │  auth-svc   │  │  sys-svc    │    │  │
│   │  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘    │  │
│   └─────────┼────────────────┼────────────────┼────────────────┼───────────┘  │
│             │                │                │                │              │
│             ▼                ▼                ▼                ▼              │
│   ┌─────────────────────────────────────────────────────────────────────────┐  │
│   │                       AI服务层 (FastAPI)                                │  │
│   │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐    │  │
│   │  │  文档解析   │  │  实体抽取   │  │  向量检索   │  │  LLM问答    │    │  │
│   │  │  parse-svc  │  │  ner-svc    │  │  search-svc │  │  llm-svc    │    │  │
│   │  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘    │  │
│   └─────────┼────────────────┼────────────────┼────────────────┼───────────┘  │
│             │                │                │                │              │
│             ▼                ▼                ▼                ▼              │
│   ┌─────────────────────────────────────────────────────────────────────────┐  │
│   │                        数据存储层 (Data Layer)                          │  │
│   │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐    │  │
│   │  │ PostgreSQL  │  │   Milvus    │  │    Neo4j    │  │    Redis    │    │  │
│   │  │  关系数据   │  │  向量数据   │  │  图谱数据   │  │   缓存数据  │    │  │
│   │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘    │  │
│   └─────────────────────────────────────────────────────────────────────────┘  │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘
```

### 3.2 模块依赖矩阵

| 模块 | 依赖模块 | 依赖类型 | 开发顺序 |
|------|---------|---------|---------|
| 项目骨架 | 无 | - | 1 |
| 数据库初始化 | 项目骨架 | 强依赖 | 2 |
| 认证授权 | 数据库初始化 | 强依赖 | 3 |
| 用户管理 | 认证授权 | 强依赖 | 4 |
| 文档管理 | 用户管理 | 强依赖 | 5 |
| 文档解析 | 文档管理 | 强依赖 | 6 |
| 向量化服务 | 文档解析 | 强依赖 | 7 |
| 实体抽取 | 文档解析 | 强依赖 | 8 |
| 关系抽取 | 实体抽取 | 强依赖 | 9 |
| 图谱存储 | 关系抽取 | 强依赖 | 10 |
| 向量检索 | 向量化服务 | 强依赖 | 11 |
| 图遍历检索 | 图谱存储 | 强依赖 | 12 |
| 融合重排 | 向量检索 + 图遍历检索 | 强依赖 | 13 |
| LLM问答 | 融合重排 | 强依赖 | 14 |
| 系统管理 | 用户管理 | 弱依赖 | 15 |

---

## 4. 分阶段开发计划

### 4.1 阶段一：基础设施层（第1-2周）

```
优先级：🔴 最高 | 依赖：无 | 风险：高 | 工作量：2周
```

#### 4.1.1 项目骨架搭建

| 任务ID | 任务名称 | 负责人 | 工期 | 交付物 |
|--------|---------|--------|------|--------|
| T1.1.1 | Spring Boot 3 主工程初始化 | 后端开发 | 1天 | 可运行的Spring Boot项目 |
| T1.1.2 | FastAPI AI服务工程初始化 | AI开发 | 1天 | 可运行的FastAPI项目 |
| T1.1.3 | React 18 前端工程初始化 | 前端开发 | 1天 | 可运行的React项目 |
| T1.1.4 | Docker Compose 开发环境配置 | 运维 | 1天 | docker-compose.yml |
| T1.1.5 | 项目目录结构规范制定 | 架构师 | 0.5天 | 目录结构文档 |

**技术要点：**
- Spring Boot 3.2.x + Java 17
- FastAPI 0.110+ + Python 3.11
- React 18 + TypeScript 5 + Vite 5
- Docker Compose 一键启动开发环境

#### 4.1.2 数据库初始化

| 任务ID | 任务名称 | 负责人 | 工期 | 交付物 |
|--------|---------|--------|------|--------|
| T1.2.1 | PostgreSQL 表结构创建 | 后端开发 | 1天 | SQL初始化脚本 |
| T1.2.2 | Milvus 向量集合创建 | AI开发 | 1天 | 向量集合配置脚本 |
| T1.2.3 | Elasticsearch 索引创建 | 后端开发 | 1天 | ES索引配置脚本 |
| T1.2.4 | Neo4j 图谱Schema创建 | AI开发 | 1天 | Cypher初始化脚本 |
| T1.2.5 | Redis 缓存配置 | 后端开发 | 0.5天 | Redis配置文件 |
| T1.2.6 | 数据库连接池配置 | 后端开发 | 0.5天 | 数据源配置 |

**数据库表设计：**
- documents（文档表）
- document_chunks（文档片段表）
- entities（实体表）
- relations（关系表）
- users（用户表）
- roles（角色表）
- permissions（权限表）
- chat_history（对话历史表）
- audit_logs（审计日志表）

**Elasticsearch索引设计：**
- doc_index（文档关键词索引）
- metadata_index（元数据索引）

#### 4.1.3 通用组件开发

| 任务ID | 任务名称 | 负责人 | 工期 | 交付物 |
|--------|---------|--------|------|--------|
| T1.3.1 | 统一响应格式封装 | 后端开发 | 0.5天 | Result<T>通用响应类 |
| T1.3.2 | 全局异常处理 | 后端开发 | 0.5天 | GlobalExceptionHandler |
| T1.3.3 | 日志配置 | 后端开发 | 0.5天 | Logback配置文件 |
| T1.3.4 | API文档配置 | 后端开发 | 0.5天 | Swagger/Knife4j配置 |
| T1.3.5 | 跨域配置 | 后端开发 | 0.5天 | CORS配置 |

#### 4.1.4 中间件集成

| 任务ID | 任务名称 | 负责人 | 工期 | 交付物 |
|--------|---------|--------|------|--------|
| T1.4.1 | Kafka Topic创建 | 运维 | 0.5天 | Topic配置脚本 |
| T1.4.2 | Kafka生产者/消费者配置 | 后端开发 | 1天 | Kafka配置类 |
| T1.4.3 | Redis连接池配置 | 后端开发 | 0.5天 | RedisTemplate配置 |
| T1.4.4 | MinIO存储配置 | 后端开发 | 0.5天 | MinIO客户端配置 |

**阶段一交付物：**
- [x] 可运行的项目骨架（前端+后端+AI服务）
- [x] 数据库初始化脚本
- [x] Docker Compose开发环境
- [x] 通用组件库
- [x] 中间件集成配置

---

### 4.2 阶段二：认证授权模块（第2-3周）

```
优先级：🔴 最高 | 依赖：基础设施层 | 风险：高 | 工作量：1.5周
```

#### 4.2.1 用户管理API

| 任务ID | 任务名称 | 负责人 | 工期 | 交付物 |
|--------|---------|--------|------|--------|
| T2.1.1 | 用户实体设计 | 后端开发 | 0.5天 | User实体类 |
| T2.1.2 | 用户CRUD接口 | 后端开发 | 1天 | UserController |
| T2.1.3 | 密码加密存储 | 后端开发 | 0.5天 | BCrypt加密实现 |
| T2.1.4 | 用户数据校验 | 后端开发 | 0.5天 | 参数校验注解 |

#### 4.2.2 JWT认证实现

| 任务ID | 任务名称 | 负责人 | 工期 | 交付物 |
|--------|---------|--------|------|--------|
| T2.2.1 | 登录/登出接口 | 后端开发 | 1天 | AuthController |
| T2.2.2 | Token生成与验证 | 后端开发 | 1天 | JwtTokenProvider |
| T2.2.3 | Token刷新机制 | 后端开发 | 0.5天 | Token刷新接口 |
| T2.2.4 | API Key认证 | 后端开发 | 0.5天 | API Key拦截器 |

#### 4.2.3 RBAC权限模型

| 任务ID | 任务名称 | 负责人 | 工期 | 交付物 |
|--------|---------|--------|------|--------|
| T2.3.1 | 角色/权限实体设计 | 后端开发 | 0.5天 | Role/Permission实体 |
| T2.3.2 | 权限注解实现 | 后端开发 | 1天 | @RequirePermission |
| T2.3.3 | 数据权限过滤 | 后端开发 | 1天 | DataPermissionInterceptor |
| T2.3.4 | 权限缓存优化 | 后端开发 | 0.5天 | Redis权限缓存 |

#### 4.2.4 前端登录模块

| 任务ID | 任务名称 | 负责人 | 工期 | 交付物 |
|--------|---------|--------|------|--------|
| T2.4.1 | 登录页面 | 前端开发 | 1天 | Login页面组件 |
| T2.4.2 | 权限路由 | 前端开发 | 1天 | 路由守卫实现 |
| T2.4.3 | 用户信息管理 | 前端开发 | 0.5天 | 用户状态管理 |
| T2.4.4 | Token存储与刷新 | 前端开发 | 0.5天 | Token管理工具 |

**阶段二交付物：**
- [x] 完整的用户管理API
- [x] JWT认证系统
- [x] RBAC权限控制
- [x] 前端登录功能

---

### 4.3 阶段三：文档处理Pipeline（第3-5周）

```
优先级：🟠 高 | 依赖：认证授权 | 风险：中 | 工作量：2.5周
```

#### 4.3.1 文档管理API（Spring Boot）

| 任务ID | 任务名称 | 负责人 | 工期 | 交付物 |
|--------|---------|--------|------|--------|
| T3.1.1 | 文档实体设计 | 后端开发 | 0.5天 | Document实体类 |
| T3.1.2 | 文档上传接口 | 后端开发 | 1天 | DocumentController.upload() |
| T3.1.3 | 文档元数据管理 | 后端开发 | 1天 | 元数据CRUD接口 |
| T3.1.4 | 文档状态管理 | 后端开发 | 0.5天 | 状态机实现 |
| T3.1.5 | 文档列表/详情查询 | 后端开发 | 1天 | 分页查询接口 |
| T3.1.6 | 文档删除接口 | 后端开发 | 0.5天 | 级联删除实现 |

#### 4.3.2 文档解析服务（FastAPI）

| 任务ID | 任务名称 | 负责人 | 工期 | 交付物 |
|--------|---------|--------|------|--------|
| T3.2.1 | PDF解析器 | AI开发 | 2天 | PDFParser类 |
| T3.2.2 | Word解析器 | AI开发 | 1天 | WordParser类 |
| T3.2.3 | Markdown解析器 | AI开发 | 1天 | MarkdownParser类 |
| T3.2.4 | 文本清洗与预处理 | AI开发 | 1天 | TextCleaner类 |
| T3.2.5 | 解析服务API | AI开发 | 1天 | FastAPI解析接口 |

#### 4.3.3 文档分块服务（FastAPI）

| 任务ID | 任务名称 | 负责人 | 工期 | 交付物 |
|--------|---------|--------|------|--------|
| T3.3.1 | 语义分块算法 | AI开发 | 2天 | SemanticChunker类 |
| T3.3.2 | 固定大小分块 | AI开发 | 0.5天 | FixedSizeChunker类 |
| T3.3.3 | 分块策略配置 | AI开发 | 1天 | ChunkConfig配置类 |
| T3.3.4 | 分块元数据管理 | AI开发 | 0.5天 | ChunkMetadata类 |

#### 4.3.4 向量化与双存储服务（FastAPI）

| 任务ID | 任务名称 | 负责人 | 工期 | 交付物 |
|--------|---------|--------|------|--------|
| T3.4.1 | Qwen-Embedding集成 | AI开发 | 1天 | EmbeddingService类 |
| T3.4.2 | 批量向量化处理 | AI开发 | 1天 | BatchEmbeddingProcessor |
| T3.4.3 | Milvus向量存储 | AI开发 | 1天 | MilvusClient封装 |
| T3.4.4 | Elasticsearch文档索引 | 后端开发 | 1天 | ESIndexService类 |
| T3.4.5 | 双存储同步机制 | 后端开发 | 1天 | DualStorageService类 |
| T3.4.6 | 向量索引优化 | AI开发 | 1天 | 索引配置优化 |

#### 4.3.5 异步任务管理

| 任务ID | 任务名称 | 负责人 | 工期 | 交付物 |
|--------|---------|--------|------|--------|
| T3.5.1 | Kafka消息队列集成 | 后端开发 | 1天 | 消息生产者/消费者 |
| T3.5.2 | 任务状态追踪 | 后端开发 | 1天 | TaskStatusManager |
| T3.5.3 | 任务进度查询 | 后端开发 | 0.5天 | 进度查询接口 |
| T3.5.4 | 任务重试机制 | 后端开发 | 0.5天 | 重试策略实现 |

#### 4.3.6 Elasticsearch集成

| 任务ID | 任务名称 | 负责人 | 工期 | 交付物 |
|--------|---------|--------|------|--------|
| T3.6.1 | ES客户端配置 | 后端开发 | 0.5天 | ESClient配置类 |
| T3.6.2 | IK分词器集成 | 后端开发 | 0.5天 | 中文分词配置 |
| T3.6.3 | 文档索引Mapping设计 | 后端开发 | 1天 | 索引Mapping配置 |
| T3.6.4 | 索引写入服务 | 后端开发 | 1天 | ESIndexWriter类 |
| T3.6.5 | 索引更新与删除 | 后端开发 | 0.5天 | 索引维护接口 |

**技术要点：**
- Elasticsearch 8.x + IK中文分词器
- BM25关键词检索算法
- 索引分片策略（3分片1副本）
- 与Milvus通过doc_id关联

**阶段三交付物：**
- [x] 完整的文档管理API
- [x] 多格式文档解析服务
- [x] 语义分块服务
- [x] 向量化服务
- [x] 异步任务管理系统

---

### 4.4 阶段四：知识图谱模块（第5-7周）

```
优先级：🟠 高 | 依赖：文档处理 | 风险：中 | 工作量：2.5周
```

#### 4.4.1 实体抽取服务（FastAPI）

| 任务ID | 任务名称 | 负责人 | 工期 | 交付物 |
|--------|---------|--------|------|--------|
| T4.1.1 | LLM实体识别Prompt设计 | AI开发 | 1天 | EntityExtractionPrompt |
| T4.1.2 | Qwen2.5-Max集成 | AI开发 | 1天 | LLMClient封装 |
| T4.1.3 | 实体类型定义 | AI开发 | 0.5天 | EntityType枚举 |
| T4.1.4 | 实体消歧算法 | AI开发 | 2天 | EntityDisambiguator |
| T4.1.5 | Neo4j实体存储 | AI开发 | 1天 | Neo4jEntityRepository |

#### 4.4.2 关系抽取服务（FastAPI）

| 任务ID | 任务名称 | 负责人 | 工期 | 交付物 |
|--------|---------|--------|------|--------|
| T4.2.1 | LLM关系识别Prompt设计 | AI开发 | 1天 | RelationExtractionPrompt |
| T4.2.2 | 关系类型定义 | AI开发 | 0.5天 | RelationType枚举 |
| T4.2.3 | 关系置信度计算 | AI开发 | 1天 | ConfidenceCalculator |
| T4.2.4 | Neo4j关系存储 | AI开发 | 1天 | Neo4jRelationRepository |

#### 4.4.3 图谱查询API（Spring Boot + FastAPI）

| 任务ID | 任务名称 | 负责人 | 工期 | 交付物 |
|--------|---------|--------|------|--------|
| T4.3.1 | 实体查询接口 | 后端开发 | 1天 | EntityController |
| T4.3.2 | 关系查询接口 | 后端开发 | 1天 | RelationController |
| T4.3.3 | 图遍历查询 | AI开发 | 2天 | GraphTraversalService |
| T4.3.4 | 路径查询 | AI开发 | 1天 | PathQueryService |

#### 4.4.4 图谱可视化

| 任务ID | 任务名称 | 负责人 | 工期 | 交付物 |
|--------|---------|--------|------|--------|
| T4.4.1 | 子图查询接口 | AI开发 | 1天 | SubgraphService |
| T4.4.2 | 前端图谱展示组件 | 前端开发 | 2天 | GraphVisualization组件 |
| T4.4.3 | 证据链可视化 | 前端开发 | 1天 | EvidenceChain组件 |

#### 4.4.5 图谱管理

| 任务ID | 任务名称 | 负责人 | 工期 | 交付物 |
|--------|---------|--------|------|--------|
| T4.5.1 | 图谱统计接口 | 后端开发 | 0.5天 | GraphStatisticsService |
| T4.5.2 | 实体/关系编辑 | 后端开发 | 1天 | 图谱编辑接口 |
| T4.5.3 | 图谱质量评估 | AI开发 | 1天 | QualityEvaluator |

**阶段四交付物：**
- [x] 实体抽取服务
- [x] 关系抽取服务
- [x] 图谱查询API
- [x] 图谱可视化组件
- [x] 图谱管理功能

---

### 4.5 阶段五：检索与问答模块（第7-9周）

```
优先级：🟡 中高 | 依赖：知识图谱 | 风险：高 | 工作量：2.5周
```

#### 4.5.1 混合检索服务（FastAPI）

| 任务ID | 任务名称 | 负责人 | 工期 | 交付物 |
|--------|---------|--------|------|--------|
| T5.1.1 | Milvus向量检索集成 | AI开发 | 1天 | VectorSearchService |
| T5.1.2 | Elasticsearch关键词检索 | 后端开发 | 1天 | KeywordSearchService |
| T5.1.3 | RRF融合算法实现 | AI开发 | 1天 | RRFFusionService |
| T5.1.4 | 相似度计算 | AI开发 | 0.5天 | SimilarityCalculator |
| T5.1.5 | 过滤条件支持 | AI开发 | 1天 | FilterBuilder |
| T5.1.6 | 检索结果排序 | AI开发 | 0.5天 | ResultSorter |

#### 4.5.2 图遍历检索服务（FastAPI）

| 任务ID | 任务名称 | 负责人 | 工期 | 交付物 |
|--------|---------|--------|------|--------|
| T5.2.1 | BFS遍历实现 | AI开发 | 1天 | BFSTraverser |
| T5.2.2 | DFS遍历实现 | AI开发 | 1天 | DFSTraverser |
| T5.2.3 | 多跳查询（2-4跳） | AI开发 | 2天 | MultiHopQueryService |
| T5.2.4 | 证据链构建 | AI开发 | 1天 | EvidenceChainBuilder |
| T5.2.5 | Neo4j Cypher优化 | AI开发 | 1天 | CypherOptimizer |

#### 4.5.3 融合重排服务（FastAPI）

| 任务ID | 任务名称 | 负责人 | 工期 | 交付物 |
|--------|---------|--------|------|--------|
| T5.3.1 | 结果去重与合并 | AI开发 | 1天 | ResultMerger |
| T5.3.2 | 加权融合策略 | AI开发 | 1天 | WeightedFusionStrategy |
| T5.3.3 | RRF融合策略 | AI开发 | 0.5天 | RRFFusionStrategy |
| T5.3.4 | Qwen-Reranker集成 | AI开发 | 1天 | RerankerService |
| T5.3.5 | Top-K结果返回 | AI开发 | 0.5天 | TopKSelector |

#### 4.5.4 LLM问答服务（FastAPI）

| 任务ID | 任务名称 | 负责人 | 工期 | 交付物 |
|--------|---------|--------|------|--------|
| T5.4.1 | Prompt模板设计 | AI开发 | 1天 | PromptTemplate类 |
| T5.4.2 | 上下文构建 | AI开发 | 1天 | ContextBuilder |
| T5.4.3 | Qwen2.5-Max集成 | AI开发 | 1天 | LLMGenerationService |
| T5.4.4 | 流式输出（SSE） | AI开发 | 1天 | SSEStreamHandler |
| T5.4.5 | 引用标注 | AI开发 | 1天 | ReferenceAnnotator |

#### 4.5.5 前端问答界面

| 任务ID | 任务名称 | 负责人 | 工期 | 交付物 |
|--------|---------|--------|------|--------|
| T5.5.1 | 对话界面 | 前端开发 | 2天 | ChatInterface组件 |
| T5.5.2 | 流式输出展示 | 前端开发 | 1天 | StreamOutput组件 |
| T5.5.3 | 引用来源展示 | 前端开发 | 1天 | ReferenceList组件 |
| T5.5.4 | 证据链可视化 | 前端开发 | 1天 | EvidenceChainView组件 |

**阶段五交付物：**
- [x] 向量检索服务
- [x] 图遍历检索服务
- [x] 融合重排服务
- [x] LLM问答服务
- [x] 前端问答界面

---

### 4.6 阶段六：系统管理与优化（第9-10周）

```
优先级：🟢 中 | 依赖：核心功能 | 风险：低 | 工作量：1.5周
```

#### 4.6.1 系统管理API

| 任务ID | 任务名称 | 负责人 | 工期 | 交付物 |
|--------|---------|--------|------|--------|
| T6.1.1 | 系统配置管理 | 后端开发 | 1天 | ConfigController |
| T6.1.2 | 系统状态监控 | 后端开发 | 1天 | HealthCheckService |
| T6.1.3 | 审计日志查询 | 后端开发 | 1天 | AuditLogController |
| T6.1.4 | 统计分析接口 | 后端开发 | 1天 | StatisticsController |

#### 4.6.2 前端管理后台

| 任务ID | 任务名称 | 负责人 | 工期 | 交付物 |
|--------|---------|--------|------|--------|
| T6.2.1 | 用户管理页面 | 前端开发 | 1天 | UserManagement页面 |
| T6.2.2 | 文档管理页面 | 前端开发 | 1天 | DocumentManagement页面 |
| T6.2.3 | 系统配置页面 | 前端开发 | 1天 | SystemConfig页面 |
| T6.2.4 | 统计仪表盘 | 前端开发 | 2天 | Dashboard页面 |

#### 4.6.3 性能优化

| 任务ID | 任务名称 | 负责人 | 工期 | 交付物 |
|--------|---------|--------|------|--------|
| T6.3.1 | Redis缓存优化 | 后端开发 | 1天 | 缓存策略优化 |
| T6.3.2 | 数据库索引优化 | 后端开发 | 1天 | 索引优化脚本 |
| T6.3.3 | 检索性能调优 | AI开发 | 1天 | 检索Pipeline优化 |
| T6.3.4 | LLM调用优化 | AI开发 | 1天 | 并发调用优化 |

#### 4.6.4 测试与文档

| 任务ID | 任务名称 | 负责人 | 工期 | 交付物 |
|--------|---------|--------|------|--------|
| T6.4.1 | 单元测试 | 全员 | 2天 | 测试覆盖率>70% |
| T6.4.2 | 集成测试 | 全员 | 2天 | 集成测试用例 |
| T6.4.3 | API文档完善 | 后端开发 | 1天 | OpenAPI文档 |
| T6.4.4 | 部署文档编写 | 运维 | 1天 | 部署指南 |

**阶段六交付物：**
- [x] 系统管理API
- [x] 前端管理后台
- [x] 性能优化报告
- [x] 测试报告
- [x] 完整文档

---

## 5. 详细开发任务

### 5.1 任务清单总览

| 阶段 | 任务数 | 总工期 | 关键里程碑 |
|------|--------|--------|-----------|
| 阶段一：基础设施层 | 21 (+1) | 2周 | 项目骨架可运行 |
| 阶段二：认证授权 | 16 | 1.5周 | 登录认证可用 |
| 阶段三：文档处理 | 32 (+6) | 2.5周 | 文档入库Pipeline可用 |
| 阶段四：知识图谱 | 21 | 2.5周 | 图谱构建与查询可用 |
| 阶段五：检索问答 | 26 (+2) | 2.5周 | GraphRAG问答可用 |
| 阶段六：系统管理 | 16 | 1.5周 | 完整系统交付 |
| **合计** | **132** | **12周** | **完整系统** |

### 5.2 任务优先级定义

| 优先级 | 标识 | 说明 | 处理方式 |
|--------|------|------|---------|
| P0 | 🔴 最高 | 核心功能，必须完成 | 优先开发，不可延期 |
| P1 | 🟠 高 | 重要功能，应该完成 | 优先开发，可适当延期 |
| P2 | 🟡 中 | 一般功能，尽量完成 | 正常开发，可调整 |
| P3 | 🟢 低 | 辅助功能，可选完成 | 后期开发，可裁剪 |

### 5.3 任务状态定义

| 状态 | 标识 | 说明 |
|------|------|------|
| 待开始 | ⏳ | 任务未开始 |
| 进行中 | 🔄 | 任务正在进行 |
| 已完成 | ✅ | 任务已完成 |
| 已阻塞 | 🚫 | 任务被阻塞 |
| 已取消 | ❌ | 任务已取消 |

---

## 6. 开发时间线

### 6.1 甘特图

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                           开发时间线（10周）                                       │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│ Week:   1    2    3    4    5    6    7    8    9   10                          │
│         ├────┼────┼────┼────┼────┼────┼────┼────┼────┤                          │
│                                                                                 │
│ 阶段一 ████████░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░  基础设施层                │
│ 阶段二 ░░░░░░░░████████░░░░░░░░░░░░░░░░░░░░░░░░░░░░░  认证授权                  │
│ 阶段三 ░░░░░░░░░░░░░░░░████████████░░░░░░░░░░░░░░░░░░  文档处理                 │
│ 阶段四 ░░░░░░░░░░░░░░░░░░░░░░░░░░████████████░░░░░░░░  知识图谱                 │
│ 阶段五 ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░████████████  检索问答              │
│ 阶段六 ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░████████  系统管理        │
│                                                                                 │
│ 里程碑：                                                                        │
│   M1 ──┐ Week 2: 项目骨架完成                                                   │
│   M2 ──┼─┐ Week 3: 认证授权完成                                                 │
│   M3 ──┼─┼─┐ Week 5: 文档处理完成                                               │
│   M4 ──┼─┼─┼─┐ Week 7: 知识图谱完成                                             │
│   M5 ──┼─┼─┼─┼─┐ Week 9: 检索问答完成                                           │
│   M6 ──┼─┼─┼─┼─┼─┐ Week 10: 系统交付                                            │
│        ▼ ▼ ▼ ▼ ▼ ▼                                                             │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘
```

### 6.2 里程碑定义

| 里程碑 | 时间点 | 交付物 | 验收标准 |
|--------|--------|--------|---------|
| M1 | Week 2 | 项目骨架 | 所有服务可启动，数据库可连接 |
| M2 | Week 3 | 认证授权 | 用户可登录，权限可控制 |
| M3 | Week 5 | 文档处理 | 文档可上传、解析、向量化 |
| M4 | Week 7 | 知识图谱 | 实体/关系可抽取、图谱可查询 |
| M5 | Week 9 | 检索问答 | GraphRAG问答可用 |
| M6 | Week 10 | 系统交付 | 完整系统可部署 |

### 6.3 迭代计划

| 迭代 | 时间 | 目标 | 演示内容 |
|------|------|------|---------|
| Sprint 1 | Week 1-2 | 基础设施 | 项目骨架演示 |
| Sprint 2 | Week 3-4 | 认证+文档管理 | 登录+文档上传演示 |
| Sprint 3 | Week 5-6 | 文档处理+图谱 | 文档入库+图谱展示 |
| Sprint 4 | Week 7-8 | 图谱+检索 | 图谱查询+检索演示 |
| Sprint 5 | Week 9-10 | 问答+管理 | 完整系统演示 |

---

## 7. 风险评估与应对

### 7.1 技术风险

| 风险项 | 风险等级 | 影响描述 | 概率 | 应对策略 |
|-------|---------|---------|------|---------|
| LLM服务不稳定 | 🔴 高 | 影响问答功能可用性 | 中 | API与本地模型双备份，服务降级策略 |
| 向量检索精度不足 | 🟡 中 | 影响问答准确率 | 中 | 混合检索策略，重排序优化，用户反馈迭代 |
| 图谱构建质量差 | 🟡 中 | 影响多跳推理效果 | 中 | 置信度阈值控制，人工审核机制 |
| 文档解析失败 | 🟡 中 | 影响知识入库 | 低 | 多解析器备份，异常处理机制 |
| 系统性能瓶颈 | 🟡 中 | 影响用户体验 | 中 | 性能监控告警，缓存策略优化，水平扩展 |
| 数据安全问题 | 🔴 高 | 影响合规性 | 低 | 私有化部署核心数据，数据加密传输存储 |

### 7.2 业务风险

| 风险项 | 风险等级 | 影响描述 | 概率 | 应对策略 |
|-------|---------|---------|------|---------|
| 用户采纳度低 | 🟡 中 | 影响项目价值 | 中 | 分阶段推广，用户培训支持，持续优化体验 |
| 知识质量差 | 🟡 中 | 影响问答效果 | 中 | 知识审核机制，质量评分体系，定期清理更新 |
| 需求变更频繁 | 🟡 中 | 影响开发进度 | 高 | 敏捷开发模式，模块化设计，需求优先级管理 |

### 7.3 资源风险

| 风险项 | 风险等级 | 影响描述 | 概率 | 应对策略 |
|-------|---------|---------|------|---------|
| GPU资源不足 | 🟡 中 | 影响模型推理 | 中 | 云GPU弹性调度，模型量化优化，推理服务优化 |
| 存储空间不足 | 🟢 低 | 影响数据存储 | 低 | 存储容量规划，数据生命周期管理，云存储弹性扩展 |
| 团队技能不足 | 🟡 中 | 影响开发效率 | 中 | 技术培训计划，外部专家支持，技术文档沉淀 |
| 人员变动 | 🟡 中 | 影响项目进度 | 中 | 知识文档化，代码规范，结对编程 |

### 7.4 风险应对流程

```
┌─────────────────────────────────────────────────────────────────────┐
│                       风险管理流程                                   │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│   风险识别 ──→ 风险评估 ──→ 应对策略 ──→ 监控预警 ──→ 持续改进      │
│      │            │            │            │            │          │
│      ↓            ↓            ↓            ↓            ↓          │
│   ┌──────┐    ┌──────┐    ┌──────┐    ┌──────┐    ┌──────┐        │
│   │定期  │    │等级  │    │预防  │    │监控  │    │复盘  │        │
│   │排查  │    │评定  │    │措施  │    │指标  │    │优化  │        │
│   └──────┘    └──────┘    └──────┘    └──────┘    └──────┘        │
│                                                                     │
│   风险等级定义：                                                     │
│   🔴 高风险：可能导致项目失败，需立即处理                            │
│   🟡 中风险：可能影响项目进度或质量，需制定应对计划                   │
│   🟢 低风险：影响较小，可接受或简单处理                              │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 7.5 应急预案

#### LLM服务故障应急预案

```
故障等级：🔴 高风险
触发条件：LLM API连续失败 > 3次 或 响应时间 > 30秒

应急流程：
├── 1. 自动切换本地模型（Qwen2.5-Max API → 本地Qwen2.5-72B）
├── 2. 触发告警通知运维团队
├── 3. 启动服务降级模式（仅返回检索结果）
├── 4. 排查故障原因并修复
└── 5. 恢复正常服务并记录事件
```

#### 数据安全事件应急预案

```
故障等级：🔴 高风险
触发条件：检测到数据泄露或异常访问

应急流程：
├── 1. 立即切断相关服务访问
├── 2. 启动安全审计追溯
├── 3. 通知安全团队和管理层
├── 4. 评估影响范围并上报
├── 5. 修复安全漏洞
└── 6. 恢复服务并加强监控
```

### 7.6 混合检索验证标准

#### 功能验证

| 验证项 | 验证方法 | 预期结果 |
|--------|---------|---------|
| ES关键词检索 | 输入关键词查询 | 返回相关文档，BM25排序正确 |
| Milvus向量检索 | 输入语义查询 | 返回语义相似文档 |
| RRF融合检索 | 执行混合查询 | 结果综合两种检索优势 |
| doc_id关联 | 查询ES和Milvus | 同一文档ID数据一致 |
| 过滤条件 | 添加metadata过滤 | 过滤结果正确 |

#### 性能验证

| 指标 | 目标值 | 验证方法 |
|------|--------|---------|
| ES检索延迟 | < 20ms | 性能测试 |
| Milvus检索延迟 | < 50ms | 性能测试 |
| 混合检索总延迟 | < 100ms | 性能测试 |
| 召回率提升 | 10-15% | 对比测试 |
| 并发QPS | 200+ | 压力测试 |

#### 数据一致性验证

| 验证项 | 验证方法 | 预期结果 |
|--------|---------|---------|
| 双存储写入一致性 | 写入后立即查询 | ES和Milvus数据一致 |
| 删除同步 | 删除文档后查询 | 两边数据都已删除 |
| 更新同步 | 更新文档后查询 | 两边数据都已更新 |

---

## 8. MVP精简方案

### 8.1 MVP目标

在 **4-6周** 内交付一个可验证核心价值的最小可行产品。

### 8.2 MVP功能范围

```
MVP核心功能：
├── 用户认证（登录/登出）
├── 文档上传与管理
├── 文档解析与分块
├── 向量化与存储
├── 向量检索
├── LLM问答（无图谱）
└── 基础前端界面

MVP暂不包含：
├── 知识图谱构建
├── 图遍历检索
├── 融合重排
├── 复杂权限控制
├── 系统管理后台
└── 性能优化
```

### 8.3 MVP开发计划

| 周次 | 开发内容 | 交付物 |
|------|---------|--------|
| Week 1 | 项目骨架 + 认证授权 | 可登录的系统 |
| Week 2 | 文档上传 + 解析 + 分块 | 文档可入库 |
| Week 3 | 向量化 + Milvus存储 | 向量可检索 |
| Week 4 | 向量检索 + LLM问答 | 问答可用 |
| Week 5 | 前端问答界面 | 完整体验 |
| Week 6 | 测试与优化 | 可演示产品 |

### 8.4 MVP技术栈精简

```
MVP技术栈：
├── 前端：React 18 + Ant Design Pro
├── 后端：Spring Boot 3（单服务）
├── AI服务：FastAPI（单服务）
├── 数据库：
│   ├── PostgreSQL（单实例）
│   ├── Milvus（Docker单机）
│   └── Redis（单实例）
├── 存储：本地文件系统 / MinIO
├── AI模型：
│   ├── Embedding：Qwen-Embedding（API）
│   └── LLM：Qwen2.5-Max API
└── 部署：Docker Compose
```

### 8.5 MVP验收标准

| 功能 | 验收标准 |
|------|---------|
| 用户登录 | 用户可登录系统，Token有效 |
| 文档上传 | 支持PDF/Word/Markdown上传，最大50MB |
| 文档解析 | 文档可正确解析为文本 |
| 文档分块 | 文本可按语义分块 |
| 向量化 | 分块可正确向量化并存储 |
| 向量检索 | 输入查询可返回相关文档片段 |
| LLM问答 | 输入问题可生成回答，带引用来源 |
| 前端界面 | 可完成完整问答流程 |

---

## 9. 资源需求

### 9.1 人力资源

| 角色 | 人数 | 职责 | 技能要求 |
|------|------|------|---------|
| 项目经理 | 1 | 项目管理、进度跟踪 | PMP、敏捷开发 |
| 架构师 | 1 | 架构设计、技术决策 | 微服务、AI系统设计 |
| 后端开发 | 2 | Spring Boot服务开发 | Java 17、Spring Boot 3 |
| AI开发 | 2 | FastAPI服务开发 | Python、LLM、RAG |
| 前端开发 | 1 | React前端开发 | React 18、TypeScript |
| 测试工程师 | 1 | 测试用例设计、自动化测试 | 测试框架、CI/CD |
| 运维工程师 | 1 | 部署、监控、运维 | K8s、Docker、监控 |

### 9.2 硬件资源

#### MVP阶段

| 资源 | 配置 | 数量 | 用途 |
|------|------|------|------|
| 开发服务器 | 8核16G | 1 | 开发测试 |
| 数据库服务器 | 4核8G | 1 | PostgreSQL/Milvus/Neo4j |
| 缓存服务器 | 2核4G | 1 | Redis |

#### 生产阶段

| 资源 | 配置 | 数量 | 用途 |
|------|------|------|------|
| 应用服务器 | 8核16G | 3 | 业务服务集群 |
| AI服务器 | 8核32G+GPU | 2 | AI服务集群 |
| 数据库服务器 | 16核64G | 3 | 数据库集群 |
| 向量数据库 | 16核64G | 3 | Milvus集群 |
| 图数据库 | 8核32G | 3 | Neo4j集群 |
| 缓存服务器 | 8核32G | 3 | Redis集群 |

### 9.3 软件资源

| 资源 | 版本 | 用途 |
|------|------|------|
| Qwen2.5-Max API | latest | 主力LLM |
| Qwen-Embedding API | latest | Embedding模型 |
| Qwen-Reranker API | latest | 重排模型 |
| 阿里云OSS | - | 对象存储备份 |

### 9.4 预算估算

#### MVP阶段（月）

| 项目 | 费用（万元） |
|------|-------------|
| 硬件成本 | 0.5-1 |
| 云服务成本 | 1-2 |
| LLM API成本 | 1-2 |
| **合计** | **2.5-5** |

#### 生产阶段（月）

| 项目 | 费用（万元） |
|------|-------------|
| 硬件成本 | 2-4 |
| 云服务成本 | 5-10 |
| LLM API成本 | 3-6 |
| **合计** | **10-20** |

---

## 10. 验收标准

### 10.1 功能验收标准

| 模块 | 验收标准 | 测试方法 |
|------|---------|---------|
| 用户认证 | 登录/登出正常，Token有效 | 功能测试 |
| 权限控制 | 权限校验正确，无越权访问 | 安全测试 |
| 文档管理 | CRUD操作正常，状态流转正确 | 功能测试 |
| 文档解析 | PDF/Word/Markdown解析正确 | 功能测试 |
| 文档分块 | 分块合理，语义完整 | 功能测试 |
| 向量化 | 向量生成正确，存储正常 | 功能测试 |
| ES索引 | 关键词检索正确，索引同步 | 功能测试 |
| 双存储同步 | ES与Milvus数据一致 | 一致性测试 |
| 实体抽取 | 实体识别准确率>85% | 准确率测试 |
| 关系抽取 | 关系识别准确率>80% | 准确率测试 |
| 向量检索 | Top-10召回率>90% | 召回率测试 |
| 关键词检索 | Top-10召回率>85% | 召回率测试 |
| 混合检索 | 召回率提升>10% | 对比测试 |
| 图遍历 | 多跳查询结果正确 | 功能测试 |
| 融合重排 | 重排效果优于单一检索 | 对比测试 |
| LLM问答 | 问答准确率>85% | 人工评估 |
| 流式输出 | 首字延迟<500ms | 性能测试 |

### 10.2 性能验收标准

| 指标 | 目标值 | 测试方法 |
|------|--------|---------|
| 查询响应时间 | < 3秒 | 性能测试 |
| 文档索引延迟 | < 5分钟 | 性能测试 |
| 并发用户数 | 500+ | 压力测试 |
| QPS | 100+ | 压力测试 |
| 系统可用性 | > 99.5% | 监控统计 |
| 向量检索延迟 | < 50ms | 性能测试 |
| 关键词检索延迟 | < 20ms | 性能测试 |
| 混合检索延迟 | < 100ms | 性能测试 |
| 图遍历延迟 | < 100ms | 性能测试 |
| 重排延迟 | < 200ms | 性能测试 |
| 首字延迟 | < 500ms | 性能测试 |

### 10.3 质量验收标准

| 指标 | 目标值 | 测试方法 |
|------|--------|---------|
| 代码覆盖率 | > 70% | 单元测试 |
| 接口测试覆盖率 | > 90% | 集成测试 |
| 安全漏洞 | 0高危 | 安全扫描 |
| 代码规范 | 100%通过 | 静态检查 |
| 文档完整性 | 100% | 文档审查 |

### 10.4 交付物清单

| 交付物 | 格式 | 数量 |
|--------|------|------|
| 源代码 | Git仓库 | 1 |
| 数据库脚本 | SQL | 1 |
| API文档 | OpenAPI | 1 |
| 部署文档 | Markdown | 1 |
| 用户手册 | Markdown | 1 |
| 测试报告 | PDF | 1 |
| 性能报告 | PDF | 1 |
| Docker镜像 | Docker Hub | N |

---

## 附录

### A. 参考文档

| 文档 | 版本 | 说明 |
|------|------|------|
| 需求分析文档 | v1.1 | 业务需求定义 |
| 技术选型文档 | v2.2 | 技术方案决策 |
| 系统架构设计文档 | v2.0 | 架构设计方案 |
| API接口设计文档 | v1.0 | 接口规范定义 |

### B. 开发工具

| 工具 | 用途 |
|------|------|
| IntelliJ IDEA | Java开发 |
| VS Code | Python/前端开发 |
| Postman | API测试 |
| DBeaver | 数据库管理 |
| Docker Desktop | 容器管理 |
| Git | 版本控制 |
| Jira | 任务管理 |
| Confluence | 文档协作 |

### C. 版本历史

| 版本 | 日期 | 变更内容 | 作者 |
|------|------|---------|------|
| v1.0 | 2026-02-17 | 初始版本，完整开发计划 | 技术团队 |

---

> 📝 **文档维护说明**
> 
> 本文档为GraphRAG系统开发计划正式版，基于敏捷迭代和模块化开发原则制定。
> 开发计划需要根据实际进度进行调整，如有变更请更新文档版本。
